(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}body{background:#f5f5f5}#app{width:100%;height:100%}canvas{display:block}.fps-counter{position:absolute;bottom:8px;left:8px;padding:6px 10px;background:#000000bf;color:#fff;font-family:Monaco,Menlo,Courier New,monospace;font-size:12px;font-weight:500;border-radius:4px;pointer-events:none;-webkit-user-select:none;user-select:none;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);box-shadow:0 2px 8px #0000004d}.playback-controls{position:absolute;bottom:8px;right:8px;display:flex;gap:8px;z-index:1000}.control-button{padding:6px 8px;background:#000000bf;color:#fff;border:none;border-radius:4px;cursor:pointer;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);box-shadow:0 2px 8px #0000004d;transition:all .2s ease;display:flex;align-items:center;justify-content:center;width:32px;height:32px}.control-button:hover{background:#000000d9;transform:scale(1.05)}.control-button:active{transform:scale(.95)}.control-button svg{width:16px;height:16px;fill:currentColor}.shader-error-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#000000f2;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:2000;padding:60px;overflow-y:auto}.error-overlay-content{background:#1a1a1a;border-radius:6px;max-width:900px;width:100%;display:flex;flex-direction:column;box-shadow:0 20px 60px #000c,0 0 1px #ffffff1a;border:1px solid #2a2a2a;max-height:calc(100vh - 120px)}.error-header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;background:linear-gradient(135deg,#c62828,#b71c1c);color:#fff;border-radius:6px 6px 0 0;border-bottom:1px solid rgba(0,0,0,.3);box-shadow:0 2px 8px #0003}.error-title{font-size:15px;font-weight:600;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;display:flex;align-items:center;gap:8px;letter-spacing:-.01em}.error-close{background:transparent;border:none;color:#ffffffe6;font-size:24px;line-height:1;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease;opacity:.8}.error-close:hover{background:#ffffff26;opacity:1;transform:scale(1.05)}.error-body{padding:24px;overflow-y:auto;flex:1}.error-section{margin-bottom:24px}.error-section:last-child{margin-bottom:0}.error-pass-name{font-size:13px;font-weight:600;color:#ffa726;font-family:Monaco,Menlo,Courier New,monospace;margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid #2a2a2a;letter-spacing:.02em}.error-content{margin:0;padding:14px 16px;background:#0f0f0f;border-radius:4px;color:#ff6b6b;font-size:13px;font-family:Monaco,Menlo,Courier New,monospace;line-height:1.6;overflow-x:auto;border:1px solid #2a2a2a;white-space:pre-wrap;word-break:break-word}.error-code-context{margin:12px 0 0;padding:14px 16px;background:#0d0d0d;border-radius:4px;color:#b0b0b0;font-size:12px;font-family:Monaco,Menlo,Courier New,monospace;line-height:1.6;overflow-x:auto;border:1px solid #2a2a2a;white-space:pre}.error-code-context .context-line{color:#666;display:block}.error-code-context .error-line-highlight{color:#fff;background:#c6282840;display:block;font-weight:600;border-left:3px solid #c62828;margin-left:-16px;padding-left:13px}.layout-fullscreen{width:100%;height:100%}.layout-fullscreen .canvas-container{position:relative;width:100%;height:100%;background:#000}.layout-centered{width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:60px}.layout-centered .canvas-container{position:relative;width:800px;height:600px;background:#000;border-radius:8px;box-shadow:0 20px 60px #00000040,0 5px 15px #00000026;overflow:hidden}.layout-split{width:100%;height:100%;display:flex;gap:40px;padding:120px 140px}.layout-split .canvas-container{position:relative;flex:1;background:#000;border-radius:8px;box-shadow:0 10px 30px #0003,0 3px 8px #0000001f;overflow:hidden}.layout-split .code-panel{position:relative;flex:1;display:flex;flex-direction:column;background:#fff;border-radius:8px;box-shadow:0 10px 30px #0003,0 3px 8px #0000001f;overflow:hidden}.tab-bar{display:flex;background:#f8f8f8;border-bottom:1px solid #e0e0e0;padding:8px 8px 0;gap:4px}.tab-button{padding:8px 16px;background:transparent;border:none;border-radius:6px 6px 0 0;font-size:13px;font-family:Monaco,Menlo,Courier New,monospace;cursor:pointer;transition:background .2s;color:#666}.tab-button:hover{background:#e8e8e8}.tab-button.active{background:#fff;color:#000;font-weight:500}.copy-button{position:absolute;top:12px;right:12px;padding:6px;background:transparent;border:none;border-radius:4px;color:#666;cursor:pointer;transition:all .2s;z-index:10;display:flex;align-items:center;justify-content:center}.copy-button:hover{background:#0000000d;color:#333}.copy-button:active{transform:scale(.9)}.copy-button.copied{color:#4caf50}.code-viewer{flex:1;min-height:0;overflow:auto;position:relative;background:#fff}.code-viewer pre{margin:0;padding:16px;font-size:13px;line-height:1.5;font-family:Monaco,Menlo,Courier New,monospace;background:#fff}.code-viewer code{font-family:inherit;font-size:inherit}.token.comment{color:#6a9955}.token.keyword{color:#00f}.token.string{color:#a31515}.token.number{color:#098658}.token.operator{color:#000}.token.function{color:#795e26}.token.class-name{color:#267f99}.token.punctuation{color:#000}@media (max-width: 1800px){.layout-split{padding:100px 120px}}@media (max-width: 1600px){.layout-split{padding:80px 100px}}@media (max-width: 1400px){.layout-split{padding:60px 80px}}@media (max-width: 1200px){.layout-split{padding:50px 60px}}@media (max-width: 1000px){.layout-split{padding:40px 50px}}@media (max-width: 800px){.layout-split{flex-direction:column;padding:30px;gap:30px}}.layout-tabbed{--tab-bg: #f8f8f8;--tab-border: #e0e0e0;--tab-text: #666;--tab-text-hover: #333;--tab-hover-bg: #e8e8e8;--tab-active-bg: white;--tab-active-text: #000;--code-bg: white;--code-text: #000;--line-number-text: #999;--copy-btn-bg: rgba(0, 0, 0, .05);--copy-btn-hover-bg: rgba(0, 0, 0, .1)}[data-bs-theme=dark] .layout-tabbed,.dark .layout-tabbed,:root.dark .layout-tabbed{--tab-bg: #2d2d2d;--tab-border: #444;--tab-text: #999;--tab-text-hover: #ccc;--tab-hover-bg: #3d3d3d;--tab-active-bg: #1e1e1e;--tab-active-text: #fff;--code-bg: #1e1e1e;--code-text: #d4d4d4;--line-number-text: #666;--copy-btn-bg: rgba(255, 255, 255, .1);--copy-btn-hover-bg: rgba(255, 255, 255, .15)}.layout-tabbed{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;box-sizing:border-box}.tabbed-wrapper{display:flex;flex-direction:column;width:800px;max-width:100%;height:650px;max-height:100%;border-radius:8px;box-shadow:0 20px 60px #00000040,0 5px 15px #00000026;overflow:hidden}.tabbed-tab-bar{display:flex;flex-shrink:0;background:var(--tab-bg);padding:8px 8px 0;gap:4px;overflow-x:auto;overflow-y:hidden;scrollbar-width:thin;position:relative}.tabbed-tab-bar:after{content:"";position:absolute;bottom:0;left:0;right:0;height:1px;background:var(--tab-border);z-index:0}.tabbed-tab-bar::-webkit-scrollbar{height:4px}.tabbed-tab-bar::-webkit-scrollbar-thumb{background:#ccc;border-radius:2px}.tabbed-tab-button{padding:10px 20px;background:transparent;border:none;border-radius:6px 6px 0 0;font-size:13px;font-family:Monaco,Menlo,Courier New,monospace;cursor:pointer;transition:background .2s,color .2s;color:var(--tab-text);white-space:nowrap;flex-shrink:0}.tabbed-tab-button:hover{background:var(--tab-hover-bg);color:var(--tab-text-hover)}.tabbed-tab-button.active{background:var(--tab-active-bg);color:var(--tab-active-text);font-weight:500;position:relative;z-index:1;padding-bottom:11px;margin-bottom:-1px}.tabbed-tab-button.shader-tab{font-family:system-ui,-apple-system,sans-serif}.tabbed-content{flex:1;min-height:0;position:relative;background:#000;overflow:hidden}.tabbed-canvas-container{position:absolute;top:0;left:0;width:100%;height:100%}.tabbed-code-viewer{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;background:var(--code-bg)}.tabbed-code-viewer pre{margin:0;padding:16px 16px 16px 0;font-size:13px;line-height:1.6;font-family:Monaco,Menlo,Courier New,monospace;background:var(--code-bg);color:var(--code-text);display:flex}.tabbed-code-viewer code{font-family:inherit;font-size:inherit}.tabbed-line-numbers{text-align:right;padding-right:16px;margin-right:16px;border-right:1px solid var(--tab-border);color:var(--line-number-text);-webkit-user-select:none;user-select:none;flex-shrink:0;padding-left:16px}.tabbed-code-content{flex:1;overflow-x:auto}.tabbed-copy-button{position:absolute;top:12px;right:12px;padding:8px;background:var(--copy-btn-bg);border:none;border-radius:6px;color:var(--tab-text);cursor:pointer;transition:all .2s;z-index:10;display:flex;align-items:center;justify-content:center}.tabbed-copy-button:hover{background:var(--copy-btn-hover-bg);color:var(--tab-text-hover)}.tabbed-copy-button:active{transform:scale(.9)}.tabbed-copy-button.copied{color:#4caf50}.tabbed-code-viewer .token.comment{color:#6a9955}.tabbed-code-viewer .token.keyword{color:#00f}.tabbed-code-viewer .token.string{color:#a31515}.tabbed-code-viewer .token.number{color:#098658}.tabbed-code-viewer .token.operator{color:#000}.tabbed-code-viewer .token.function{color:#795e26}.tabbed-code-viewer .token.class-name{color:#267f99}.tabbed-code-viewer .token.punctuation{color:#000}[data-bs-theme=dark] .tabbed-code-viewer .token.comment,.dark .tabbed-code-viewer .token.comment{color:#6a9955}[data-bs-theme=dark] .tabbed-code-viewer .token.keyword,.dark .tabbed-code-viewer .token.keyword{color:#569cd6}[data-bs-theme=dark] .tabbed-code-viewer .token.string,.dark .tabbed-code-viewer .token.string{color:#ce9178}[data-bs-theme=dark] .tabbed-code-viewer .token.number,.dark .tabbed-code-viewer .token.number{color:#b5cea8}[data-bs-theme=dark] .tabbed-code-viewer .token.operator,.dark .tabbed-code-viewer .token.operator{color:#d4d4d4}[data-bs-theme=dark] .tabbed-code-viewer .token.function,.dark .tabbed-code-viewer .token.function{color:#dcdcaa}[data-bs-theme=dark] .tabbed-code-viewer .token.class-name,.dark .tabbed-code-viewer .token.class-name{color:#4ec9b0}[data-bs-theme=dark] .tabbed-code-viewer .token.punctuation,.dark .tabbed-code-viewer .token.punctuation{color:#d4d4d4}@media (max-width: 1200px){.layout-tabbed{padding:40px 60px}}@media (max-width: 900px){.layout-tabbed{padding:30px 40px}}@media (max-width: 600px){.layout-tabbed{padding:20px}.tabbed-tab-button{padding:8px 12px;font-size:12px}}')),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
var ce=Object.defineProperty;var ue=(n,e,t)=>e in n?ce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var E=(n,e,t)=>ue(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();function Y(n,e,t){const r=n.createShader(e);if(!r)throw new Error("Failed to create shader object");if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){const i=n.getShaderInfoLog(r);throw n.deleteShader(r),new Error(`Shader compilation failed:
${i}`)}return r}function le(n,e,t){const r=Y(n,n.VERTEX_SHADER,e),a=Y(n,n.FRAGMENT_SHADER,t),i=n.createProgram();if(!i)throw new Error("Failed to create program object");if(n.attachShader(i,r),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)){const c=n.getProgramInfoLog(i);throw n.deleteProgram(i),n.deleteShader(r),n.deleteShader(a),new Error(`Program linking failed:
${c}`)}return n.detachShader(i,r),n.detachShader(i,a),n.deleteShader(r),n.deleteShader(a),i}function de(n){const e=n.createVertexArray();if(!e)throw new Error("Failed to create VAO");n.bindVertexArray(e);const t=new Float32Array([-1,-1,3,-1,-1,3]),r=n.createBuffer();if(!r)throw new Error("Failed to create VBO");return n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW),n.enableVertexAttribArray(0),n.vertexAttribPointer(0,2,n.FLOAT,!1,0,0),n.bindVertexArray(null),n.bindBuffer(n.ARRAY_BUFFER,null),e}function z(n,e,t){const r=n.createTexture();if(!r)throw new Error("Failed to create texture");return n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA32F,e,t,0,n.RGBA,n.FLOAT,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),r}function Z(n,e){const t=n.createFramebuffer();if(!t)throw new Error("Failed to create framebuffer");n.bindFramebuffer(n.FRAMEBUFFER,t),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const r=n.checkFramebufferStatus(n.FRAMEBUFFER);if(r!==n.FRAMEBUFFER_COMPLETE)throw n.deleteFramebuffer(t),new Error(`Framebuffer incomplete: ${me(n,r)}`);return n.bindFramebuffer(n.FRAMEBUFFER,null),t}function he(n){const e=n.createTexture();if(!e)throw new Error("Failed to create black texture");n.bindTexture(n.TEXTURE_2D,e);const t=new Float32Array([0,0,0,1]);return n.texImage2D(n.TEXTURE_2D,0,n.RGBA32F,1,1,0,n.RGBA,n.FLOAT,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),e}function pe(n){const e=n.createTexture();if(!e)throw new Error("Failed to create keyboard texture");n.bindTexture(n.TEXTURE_2D,e);const t=256,r=3,a=new Float32Array(t*r*4);return n.texImage2D(n.TEXTURE_2D,0,n.RGBA32F,t,r,0,n.RGBA,n.FLOAT,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),e}function fe(n,e,t,r){const u=new Float32Array(3072);for(let c=0;c<256;c++){const m=t.get(c)||!1,b=r.get(c)||0,v=(0*256+c)*4;u[v+0]=m?1:0,u[v+1]=m?1:0,u[v+2]=m?1:0,u[v+3]=1;const f=(2*256+c)*4;u[f+0]=b,u[f+1]=b,u[f+2]=b,u[f+3]=1}n.bindTexture(n.TEXTURE_2D,e),n.texSubImage2D(n.TEXTURE_2D,0,0,0,256,3,n.RGBA,n.FLOAT,u),n.bindTexture(n.TEXTURE_2D,null)}function me(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";case n.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:return"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE";default:return`Unknown status: ${e}`}}const ge=`#version 300 es
precision highp float;

layout(location = 0) in vec2 position;

void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
`,te=`#version 300 es
precision highp float;

// Shadertoy compatibility: equirectangular texture sampling
const float ST_PI = 3.14159265359;
const float ST_TWOPI = 6.28318530718;
vec2 _st_dirToEquirect(vec3 dir) {
  float phi = atan(dir.z, dir.x);
  float theta = asin(dir.y);
  return vec2(phi / ST_TWOPI + 0.5, theta / ST_PI + 0.5);
}
`,Ee=te.split(`
`).length-1;class be{constructor(e){E(this,"project");E(this,"gl");E(this,"_width");E(this,"_height");E(this,"_frame",0);E(this,"_time",0);E(this,"_lastStepTime",null);E(this,"_passes",[]);E(this,"_textures",[]);E(this,"_keyboardTexture",null);E(this,"_blackTexture",null);E(this,"_keyStates",new Map);E(this,"_toggleStates",new Map);E(this,"_compilationErrors",[]);this.gl=e.gl,this.project=e.project,this._width=this.gl.drawingBufferWidth,this._height=this.gl.drawingBufferHeight,this.initExtensions(),this._blackTexture=he(this.gl);const t=pe(this.gl);this._keyboardTexture={texture:t,width:256,height:3},this.initProjectTextures(),this.initRuntimePasses()}get width(){return this._width}get height(){return this._height}get stats(){const e=this._lastStepTime===null?0:this._time-this._lastStepTime;return{frame:this._frame,time:this._time,deltaTime:e,width:this._width,height:this._height}}getCompilationErrors(){return this._compilationErrors}hasErrors(){return this._compilationErrors.length>0}getImageFramebuffer(){const e=this._passes.find(t=>t.name==="Image");return(e==null?void 0:e.framebuffer)??null}step(e,t){const r=this.gl,a=this._lastStepTime===null?0:e-this._lastStepTime;this._lastStepTime=e,this._time=e;const i=[this._width,this._height,1],u=this._time,c=a,m=this._frame,b=t;r.viewport(0,0,this._width,this._height);const v=["BufferA","BufferB","BufferC","BufferD","Image"];for(const f of v){const T=this._passes.find(y=>y.name===f);T&&(this.executePass(T,{iResolution:i,iTime:u,iTimeDelta:c,iFrame:m,iMouse:b}),this.swapPassTextures(T))}this._frame+=1}resize(e,t){this._width=e,this._height=t;const r=this.gl;for(const a of this._passes)r.deleteTexture(a.currentTexture),r.deleteTexture(a.previousTexture),r.deleteFramebuffer(a.framebuffer),a.currentTexture=z(r,e,t),a.previousTexture=z(r,e,t),a.framebuffer=Z(r,a.currentTexture)}reset(){this._frame=0;const e=this.gl;for(const t of this._passes)e.bindFramebuffer(e.FRAMEBUFFER,t.framebuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.previousTexture,0),e.clear(e.COLOR_BUFFER_BIT),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.currentTexture,0);e.bindFramebuffer(e.FRAMEBUFFER,null)}updateKeyState(e,t){const r=this._keyStates.get(e)||!1;if(this._keyStates.set(e,t),t&&!r){const a=this._toggleStates.get(e)||0;this._toggleStates.set(e,a===0?1:0)}}updateKeyboardTexture(){this._keyboardTexture&&fe(this.gl,this._keyboardTexture.texture,this._keyStates,this._toggleStates)}dispose(){const e=this.gl;for(const t of this._passes)e.deleteProgram(t.uniforms.program),e.deleteVertexArray(t.vao),e.deleteFramebuffer(t.framebuffer),e.deleteTexture(t.currentTexture),e.deleteTexture(t.previousTexture);for(const t of this._textures)e.deleteTexture(t.texture);this._keyboardTexture&&e.deleteTexture(this._keyboardTexture.texture),this._blackTexture&&e.deleteTexture(this._blackTexture),this._passes=[],this._textures=[],this._keyboardTexture=null,this._blackTexture=null}initExtensions(){const e=this.gl;if(!e.getExtension("EXT_color_buffer_float"))throw new Error("EXT_color_buffer_float not supported. WebGL2 with float rendering is required.");e.getExtension("OES_texture_float_linear")}initProjectTextures(){const e=this.gl;this._textures=[];for(const t of this.project.textures){const r=e.createTexture();if(!r)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,255]));const a={name:t.name,texture:r,width:1,height:1};this._textures.push(a);const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i);const u=t.filter==="nearest"?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,u);const c=t.wrap==="clamp"?e.CLAMP_TO_EDGE:e.REPEAT;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,c),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,c),t.filter==="linear"&&e.generateMipmap(e.TEXTURE_2D),a.width=i.width,a.height=i.height,console.log(`Loaded texture '${t.name}': ${i.width}x${i.height}`)},i.onerror=()=>{console.error(`Failed to load texture '${t.name}' from ${t.source}`)},i.src=t.source}}initRuntimePasses(){const e=this.gl,t=this.project,r=de(e),a=["BufferA","BufferB","BufferC","BufferD","Image"];for(const i of a){const u=t.passes[i];if(!u)continue;const c=this.buildFragmentShader(u.glslSource);try{const m=le(e,ge,c),b={program:m,iResolution:e.getUniformLocation(m,"iResolution"),iTime:e.getUniformLocation(m,"iTime"),iTimeDelta:e.getUniformLocation(m,"iTimeDelta"),iFrame:e.getUniformLocation(m,"iFrame"),iMouse:e.getUniformLocation(m,"iMouse"),iChannel:[e.getUniformLocation(m,"iChannel0"),e.getUniformLocation(m,"iChannel1"),e.getUniformLocation(m,"iChannel2"),e.getUniformLocation(m,"iChannel3")]},v=z(e,this._width,this._height),f=z(e,this._width,this._height),T=Z(e,v),y={name:i,projectChannels:u.channels,vao:r,uniforms:b,framebuffer:T,currentTexture:v,previousTexture:f};this._passes.push(y)}catch(m){const b=m instanceof Error?m.message:String(m),v=this.getLineMapping(),f=b.match(/ERROR:\s*\d+:(\d+):/);let T=!1,y=null;if(f&&this.project.commonSource){const A=parseInt(f[1],10),_=v.boilerplateLinesBeforeCommon+2,F=_+v.commonLineCount-1;A>=_&&A<=F&&(T=!0,y=A-_+1)}this._compilationErrors.push({passName:i,error:b,source:c,isFromCommon:T,originalLine:y}),console.error(`Failed to compile ${i}:`,b)}}}getLineMapping(){const e=Ee+1,t=this.project.commonSource?this.project.commonSource.split(`
`).length:0;return{boilerplateLinesBeforeCommon:e,commonLineCount:t}}buildFragmentShader(e){const t=[te];this.project.commonSource&&(t.push("// Common code"),t.push(this.project.commonSource),t.push("")),t.push(`// Shadertoy built-in uniforms
uniform vec3  iResolution;
uniform float iTime;
uniform float iTimeDelta;
uniform int   iFrame;
uniform vec4  iMouse;
uniform sampler2D iChannel0;
uniform sampler2D iChannel1;
uniform sampler2D iChannel2;
uniform sampler2D iChannel3;
`);const r=this.preprocessCubemapTextures(e);return t.push("// User shader code"),t.push(r),t.push(""),t.push(`// Main wrapper
out vec4 fragColor;

void main() {
  mainImage(fragColor, gl_FragCoord.xy);
}`),t.join(`
`)}preprocessCubemapTextures(e){const t=/texture\s*\(\s*(iChannel[0-3])\s*,\s*([^)]+)\)/g;return e.replace(t,(r,a,i)=>i.includes("fragCoord")||i.includes("/")||/\.xy\s*$/.test(i.trim())||/\.st\s*$/.test(i.trim())||/^vec2\s*\(/.test(i.trim())?r:`texture(${a}, _st_dirToEquirect(${i}))`)}executePass(e,t){const r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer),r.useProgram(e.uniforms.program),r.bindVertexArray(e.vao),this.bindBuiltinUniforms(e.uniforms,t),this.bindChannelTextures(e),r.drawArrays(r.TRIANGLES,0,3),r.bindVertexArray(null),r.useProgram(null),r.bindFramebuffer(r.FRAMEBUFFER,null)}bindBuiltinUniforms(e,t){const r=this.gl;e.iResolution&&r.uniform3f(e.iResolution,t.iResolution[0],t.iResolution[1],t.iResolution[2]),e.iTime&&r.uniform1f(e.iTime,t.iTime),e.iTimeDelta&&r.uniform1f(e.iTimeDelta,t.iTimeDelta),e.iFrame&&r.uniform1i(e.iFrame,t.iFrame),e.iMouse&&r.uniform4f(e.iMouse,t.iMouse[0],t.iMouse[1],t.iMouse[2],t.iMouse[3])}bindChannelTextures(e){const t=this.gl;for(let r=0;r<4;r++){const a=e.projectChannels[r],i=this.resolveChannelTexture(a,e.name);t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,i);const u=e.uniforms.iChannel[r];u&&t.uniform1i(u,r)}}resolveChannelTexture(e,t){switch(e.kind){case"none":if(!this._blackTexture)throw new Error("Black texture not initialized");return this._blackTexture;case"buffer":{const a=this._passes.find(u=>u.name===e.buffer);if(!a)throw new Error(`Buffer '${e.buffer}' not found`);return e.buffer===t?a.previousTexture:a.currentTexture}case"texture2D":{const a=this._textures.find(i=>i.name===e.name);if(!a)throw new Error(`Texture '${e.name}' not found`);return a.texture}case"keyboard":if(!this._keyboardTexture)throw new Error("Internal error: keyboard texture not initialized");return this._keyboardTexture.texture;default:const r=e;throw new Error(`Unknown channel source: ${JSON.stringify(r)}`)}}swapPassTextures(e){const t=this.gl,r=e.currentTexture;e.currentTexture=e.previousTexture,e.previousTexture=r,t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.currentTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}}class ve{constructor(e){E(this,"container");E(this,"canvas");E(this,"gl");E(this,"engine");E(this,"project");E(this,"pixelRatio");E(this,"animationId",null);E(this,"startTime",0);E(this,"mouse",[0,0,-1,-1]);E(this,"fpsDisplay");E(this,"frameCount",0);E(this,"lastFpsUpdate",0);E(this,"currentFps",0);E(this,"controlsContainer",null);E(this,"playPauseButton",null);E(this,"isPaused",!1);E(this,"errorOverlay",null);E(this,"resizeObserver");E(this,"animate",e=>{if(this.animationId=requestAnimationFrame(this.animate),this.isPaused)return;const t=e/1e3,r=t-this.startTime;this.updateFps(t),this.engine.updateKeyboardTexture(),this.engine.step(r,this.mouse),this.presentToScreen()});this.container=e.container,this.project=e.project,this.pixelRatio=e.pixelRatio??window.devicePixelRatio,this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.container.appendChild(this.canvas),this.fpsDisplay=document.createElement("div"),this.fpsDisplay.className="fps-counter",this.fpsDisplay.textContent="0 FPS",this.container.appendChild(this.fpsDisplay),e.project.controls&&this.createControls();const t=this.canvas.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0,powerPreference:"high-performance"});if(!t)throw new Error("WebGL2 not supported");this.gl=t,this.updateCanvasSize(),this.engine=new be({gl:this.gl,project:e.project}),this.engine.hasErrors()&&this.showErrorOverlay(this.engine.getCompilationErrors()),this.resizeObserver=new ResizeObserver(()=>{this.updateCanvasSize(),this.engine.resize(this.canvas.width,this.canvas.height),this.startTime=performance.now()/1e3,this.engine.reset()}),this.resizeObserver.observe(this.container),this.setupMouseTracking(),this.setupKeyboardTracking(),this.setupGlobalShortcuts(),e.project.controls&&this.setupKeyboardShortcuts()}hasErrors(){return this.engine.hasErrors()}start(){this.animationId===null&&(this.startTime=performance.now()/1e3,this.animate(this.startTime))}stop(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null)}dispose(){this.stop(),this.resizeObserver.disconnect(),this.engine.dispose(),this.container.removeChild(this.canvas),this.container.removeChild(this.fpsDisplay)}updateFps(e){this.frameCount++,e-this.lastFpsUpdate>=1&&(this.currentFps=this.frameCount/(e-this.lastFpsUpdate),this.fpsDisplay.textContent=`${Math.round(this.currentFps)} FPS`,this.frameCount=0,this.lastFpsUpdate=e)}presentToScreen(){const e=this.gl,t=this.engine.getImageFramebuffer();if(!t){console.warn("No Image pass found");return}e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.bindFramebuffer(e.READ_FRAMEBUFFER,t),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.blitFramebuffer(0,0,this.canvas.width,this.canvas.height,0,0,this.canvas.width,this.canvas.height,e.COLOR_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)}updateCanvasSize(){const e=this.container.getBoundingClientRect(),t=Math.floor(e.width*this.pixelRatio),r=Math.floor(e.height*this.pixelRatio);(this.canvas.width!==t||this.canvas.height!==r)&&(this.canvas.width=t,this.canvas.height=r)}setupMouseTracking(){const e=r=>{const a=this.canvas.getBoundingClientRect(),i=(r.clientX-a.left)*this.pixelRatio,u=(a.height-(r.clientY-a.top))*this.pixelRatio;this.mouse[0]=i,this.mouse[1]=u},t=r=>{const a=this.canvas.getBoundingClientRect(),i=(r.clientX-a.left)*this.pixelRatio,u=(a.height-(r.clientY-a.top))*this.pixelRatio;this.mouse[2]=i,this.mouse[3]=u};this.canvas.addEventListener("mousemove",e),this.canvas.addEventListener("click",t)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.className="playback-controls",this.playPauseButton=document.createElement("button"),this.playPauseButton.className="control-button",this.playPauseButton.title="Play/Pause (Space)",this.playPauseButton.innerHTML=`
      <svg viewBox="0 0 16 16">
        <path d="M5 3h2v10H5V3zm4 0h2v10H9V3z"/>
      </svg>
    `,this.playPauseButton.addEventListener("click",()=>this.togglePlayPause());const e=document.createElement("button");e.className="control-button",e.title="Reset (R)",e.innerHTML=`
      <svg viewBox="0 0 16 16">
        <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
      </svg>
    `,e.addEventListener("click",()=>this.reset());const t=document.createElement("button");t.className="control-button",t.title="Screenshot (S)",t.innerHTML=`
      <svg viewBox="0 0 16 16">
        <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
        <path d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"/>
      </svg>
    `,t.addEventListener("click",()=>this.screenshot()),this.controlsContainer.appendChild(this.playPauseButton),this.controlsContainer.appendChild(e),this.controlsContainer.appendChild(t),this.container.appendChild(this.controlsContainer)}setupKeyboardTracking(){document.addEventListener("keydown",e=>{const t=e.keyCode;t>=0&&t<256&&this.engine.updateKeyState(t,!0)}),document.addEventListener("keyup",e=>{const t=e.keyCode;t>=0&&t<256&&this.engine.updateKeyState(t,!1)})}setupGlobalShortcuts(){document.addEventListener("keydown",e=>{e.code==="KeyS"&&!e.repeat&&(e.preventDefault(),this.screenshot())})}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{e.code==="Space"&&!e.repeat&&(e.preventDefault(),this.togglePlayPause()),e.code==="KeyR"&&!e.repeat&&(e.preventDefault(),this.reset())})}togglePlayPause(){this.isPaused=!this.isPaused,this.updatePlayPauseButton()}reset(){this.startTime=performance.now()/1e3,this.frameCount=0,this.lastFpsUpdate=0,this.engine.reset()}screenshot(){const e=this.project.root.split("/").pop()||"shader",t=new Date,r=t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0")+"-"+t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0")+t.getSeconds().toString().padStart(2,"0"),a=`shadertoy-${e}-${r}.png`;this.canvas.toBlob(i=>{if(!i){console.error("Failed to create screenshot blob");return}const u=URL.createObjectURL(i),c=document.createElement("a");c.href=u,c.download=a,c.click(),URL.revokeObjectURL(u),console.log(`Screenshot saved: ${a}`)},"image/png")}updatePlayPauseButton(){this.playPauseButton&&(this.isPaused?this.playPauseButton.innerHTML=`
        <svg viewBox="0 0 16 16">
          <path d="M4 3v10l8-5-8-5z"/>
        </svg>
      `:this.playPauseButton.innerHTML=`
        <svg viewBox="0 0 16 16">
          <path d="M5 3h2v10H5V3zm4 0h2v10H9V3z"/>
        </svg>
      `)}showErrorOverlay(e){this.errorOverlay||(this.errorOverlay=document.createElement("div"),this.errorOverlay.className="shader-error-overlay",this.container.appendChild(this.errorOverlay));const t=e.filter(b=>b.isFromCommon),r=e.filter(b=>!b.isFromCommon),c=[...t.length>0?[t[0]]:[],...r].map(({passName:b,error:v,source:f,isFromCommon:T,originalLine:y})=>{const A=v.replace(`Shader compilation failed:
`,"");let _=A;return T&&y!==null&&(_=A.replace(/Line \d+:/,`Line ${y}:`),_=_.replace(/ERROR:\s*\d+:(\d+):/,`ERROR: 0:${y}:`)),{passName:T?"common.glsl":b,error:this.parseShaderError(_),codeContext:T?this.extractCodeContextFromCommon(y):this.extractCodeContext(_,f)}}).map(({passName:b,error:v,codeContext:f})=>`
      <div class="error-section">
        <div class="error-pass-name">${b}</div>
        <pre class="error-content">${this.escapeHTML(v)}</pre>
        ${f?`<pre class="error-code-context">${f}</pre>`:""}
      </div>
    `).join("");this.errorOverlay.innerHTML=`
      <div class="error-overlay-content">
        <div class="error-header">
          <span class="error-title">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: text-bottom;">
              <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM3.5 7.5a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-9z"/>
            </svg>
            Shader Compilation Failed
          </span>
          <button class="error-close" title="Dismiss">×</button>
        </div>
        <div class="error-body">
          ${c}
        </div>
      </div>
    `;const m=this.errorOverlay.querySelector(".error-close");m&&m.addEventListener("click",()=>this.hideErrorOverlay())}parseShaderError(e){return e.split(`
`).map(t=>{const r=t.match(/^ERROR:\s*(\d+):(\d+):\s*(.+)$/);if(r){const[,,a,i]=r;return`Line ${a}: ${i}`}return t}).join(`
`)}extractCodeContext(e,t){const r=e.match(/ERROR:\s*\d+:(\d+):/);if(!r)return null;const a=parseInt(r[1],10),i=t.split(`
`),u=3,c=Math.max(0,a-u-1),m=Math.min(i.length,a+u);return i.slice(c,m).map((f,T)=>{const y=c+T+1,A=y===a,_=String(y).padStart(4," "),F=this.escapeHTML(f);return A?`<span class="error-line-highlight">${_} │ ${F}</span>`:`<span class="context-line">${_} │ ${F}</span>`}).join("")}extractCodeContextFromCommon(e){const t=this.engine.project.commonSource;if(!t)return null;const r=t.split(`
`),a=3,i=Math.max(0,e-a-1),u=Math.min(r.length,e+a);return r.slice(i,u).map((b,v)=>{const f=i+v+1,T=f===e,y=String(f).padStart(4," "),A=this.escapeHTML(b);return T?`<span class="error-line-highlight">${y} │ ${A}</span>`:`<span class="context-line">${y} │ ${A}</span>`}).join("")}escapeHTML(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}hideErrorOverlay(){this.errorOverlay&&(this.errorOverlay.remove(),this.errorOverlay=null)}}class Te{constructor(e){E(this,"container");E(this,"root");E(this,"canvasContainer");this.container=e.container,this.root=document.createElement("div"),this.root.className="layout-fullscreen",this.canvasContainer=document.createElement("div"),this.canvasContainer.className="canvas-container",this.root.appendChild(this.canvasContainer),this.container.appendChild(this.root)}getCanvasContainer(){return this.canvasContainer}dispose(){this.container.innerHTML=""}}class ye{constructor(e){E(this,"container");E(this,"root");E(this,"canvasContainer");this.container=e.container,this.root=document.createElement("div"),this.root.className="layout-centered",this.canvasContainer=document.createElement("div"),this.canvasContainer.className="canvas-container",this.root.appendChild(this.canvasContainer),this.container.appendChild(this.root)}getCanvasContainer(){return this.canvasContainer}dispose(){this.container.innerHTML=""}}var Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne={exports:{}};(function(n){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,u={},c={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function o(s){return s instanceof m?new m(s.type,o(s.content),s.alias):Array.isArray(s)?s.map(o):s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(o){return Object.prototype.toString.call(o).slice(8,-1)},objId:function(o){return o.__id||Object.defineProperty(o,"__id",{value:++i}),o.__id},clone:function o(s,l){l=l||{};var d,h;switch(c.util.type(s)){case"Object":if(h=c.util.objId(s),l[h])return l[h];d={},l[h]=d;for(var g in s)s.hasOwnProperty(g)&&(d[g]=o(s[g],l));return d;case"Array":return h=c.util.objId(s),l[h]?l[h]:(d=[],l[h]=d,s.forEach(function(x,p){d[p]=o(x,l)}),d);default:return s}},getLanguage:function(o){for(;o;){var s=a.exec(o.className);if(s)return s[1].toLowerCase();o=o.parentElement}return"none"},setLanguage:function(o,s){o.className=o.className.replace(RegExp(a,"gi"),""),o.classList.add("language-"+s)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(d){var o=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(d.stack)||[])[1];if(o){var s=document.getElementsByTagName("script");for(var l in s)if(s[l].src==o)return s[l]}return null}},isActive:function(o,s,l){for(var d="no-"+s;o;){var h=o.classList;if(h.contains(s))return!0;if(h.contains(d))return!1;o=o.parentElement}return!!l}},languages:{plain:u,plaintext:u,text:u,txt:u,extend:function(o,s){var l=c.util.clone(c.languages[o]);for(var d in s)l[d]=s[d];return l},insertBefore:function(o,s,l,d){d=d||c.languages;var h=d[o],g={};for(var x in h)if(h.hasOwnProperty(x)){if(x==s)for(var p in l)l.hasOwnProperty(p)&&(g[p]=l[p]);l.hasOwnProperty(x)||(g[x]=h[x])}var w=d[o];return d[o]=g,c.languages.DFS(c.languages,function(C,S){S===w&&C!=o&&(this[C]=g)}),g},DFS:function o(s,l,d,h){h=h||{};var g=c.util.objId;for(var x in s)if(s.hasOwnProperty(x)){l.call(s,x,s[x],d||x);var p=s[x],w=c.util.type(p);w==="Object"&&!h[g(p)]?(h[g(p)]=!0,o(p,l,null,h)):w==="Array"&&!h[g(p)]&&(h[g(p)]=!0,o(p,l,x,h))}}},plugins:{},highlightAll:function(o,s){c.highlightAllUnder(document,o,s)},highlightAllUnder:function(o,s,l){var d={callback:l,container:o,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};c.hooks.run("before-highlightall",d),d.elements=Array.prototype.slice.apply(d.container.querySelectorAll(d.selector)),c.hooks.run("before-all-elements-highlight",d);for(var h=0,g;g=d.elements[h++];)c.highlightElement(g,s===!0,d.callback)},highlightElement:function(o,s,l){var d=c.util.getLanguage(o),h=c.languages[d];c.util.setLanguage(o,d);var g=o.parentElement;g&&g.nodeName.toLowerCase()==="pre"&&c.util.setLanguage(g,d);var x=o.textContent,p={element:o,language:d,grammar:h,code:x};function w(S){p.highlightedCode=S,c.hooks.run("before-insert",p),p.element.innerHTML=p.highlightedCode,c.hooks.run("after-highlight",p),c.hooks.run("complete",p),l&&l.call(p.element)}if(c.hooks.run("before-sanity-check",p),g=p.element.parentElement,g&&g.nodeName.toLowerCase()==="pre"&&!g.hasAttribute("tabindex")&&g.setAttribute("tabindex","0"),!p.code){c.hooks.run("complete",p),l&&l.call(p.element);return}if(c.hooks.run("before-highlight",p),!p.grammar){w(c.util.encode(p.code));return}if(s&&r.Worker){var C=new Worker(c.filename);C.onmessage=function(S){w(S.data)},C.postMessage(JSON.stringify({language:p.language,code:p.code,immediateClose:!0}))}else w(c.highlight(p.code,p.grammar,p.language))},highlight:function(o,s,l){var d={code:o,grammar:s,language:l};if(c.hooks.run("before-tokenize",d),!d.grammar)throw new Error('The language "'+d.language+'" has no grammar.');return d.tokens=c.tokenize(d.code,d.grammar),c.hooks.run("after-tokenize",d),m.stringify(c.util.encode(d.tokens),d.language)},tokenize:function(o,s){var l=s.rest;if(l){for(var d in l)s[d]=l[d];delete s.rest}var h=new f;return T(h,h.head,o),v(o,h,s,h.head,0),A(h)},hooks:{all:{},add:function(o,s){var l=c.hooks.all;l[o]=l[o]||[],l[o].push(s)},run:function(o,s){var l=c.hooks.all[o];if(!(!l||!l.length))for(var d=0,h;h=l[d++];)h(s)}},Token:m};r.Prism=c;function m(o,s,l,d){this.type=o,this.content=s,this.alias=l,this.length=(d||"").length|0}m.stringify=function o(s,l){if(typeof s=="string")return s;if(Array.isArray(s)){var d="";return s.forEach(function(w){d+=o(w,l)}),d}var h={type:s.type,content:o(s.content,l),tag:"span",classes:["token",s.type],attributes:{},language:l},g=s.alias;g&&(Array.isArray(g)?Array.prototype.push.apply(h.classes,g):h.classes.push(g)),c.hooks.run("wrap",h);var x="";for(var p in h.attributes)x+=" "+p+'="'+(h.attributes[p]||"").replace(/"/g,"&quot;")+'"';return"<"+h.tag+' class="'+h.classes.join(" ")+'"'+x+">"+h.content+"</"+h.tag+">"};function b(o,s,l,d){o.lastIndex=s;var h=o.exec(l);if(h&&d&&h[1]){var g=h[1].length;h.index+=g,h[0]=h[0].slice(g)}return h}function v(o,s,l,d,h,g){for(var x in l)if(!(!l.hasOwnProperty(x)||!l[x])){var p=l[x];p=Array.isArray(p)?p:[p];for(var w=0;w<p.length;++w){if(g&&g.cause==x+","+w)return;var C=p[w],S=C.inside,k=!!C.lookbehind,$=!!C.greedy,X=C.alias;if($&&!C.pattern.global){var se=C.pattern.toString().match(/[imsuy]*$/)[0];C.pattern=RegExp(C.pattern.source,se+"g")}for(var W=C.pattern||C,L=d.next,M=h;L!==s.tail&&!(g&&M>=g.reach);M+=L.value.length,L=L.next){var U=L.value;if(s.length>o.length)return;if(!(U instanceof m)){var O=1,B;if($){if(B=b(W,M,o,k),!B||B.index>=o.length)break;var I=B.index,ie=B.index+B[0].length,P=M;for(P+=L.value.length;I>=P;)L=L.next,P+=L.value.length;if(P-=L.value.length,M=P,L.value instanceof m)continue;for(var D=L;D!==s.tail&&(P<ie||typeof D.value=="string");D=D.next)O++,P+=D.value.length;O--,U=o.slice(M,P),B.index-=M}else if(B=b(W,0,U,k),!B)continue;var I=B.index,N=B[0],G=U.slice(0,I),K=U.slice(I+N.length),V=M+U.length;g&&V>g.reach&&(g.reach=V);var j=L.prev;G&&(j=T(s,j,G),M+=G.length),y(s,j,O);var oe=new m(x,S?c.tokenize(N,S):N,X,N);if(L=T(s,j,oe),K&&T(s,L,K),O>1){var q={cause:x+","+w,reach:V};v(o,s,l,L.prev,M,q),g&&q.reach>g.reach&&(g.reach=q.reach)}}}}}}function f(){var o={value:null,prev:null,next:null},s={value:null,prev:o,next:null};o.next=s,this.head=o,this.tail=s,this.length=0}function T(o,s,l){var d=s.next,h={value:l,prev:s,next:d};return s.next=h,d.prev=h,o.length++,h}function y(o,s,l){for(var d=s.next,h=0;h<l&&d!==o.tail;h++)d=d.next;s.next=d,d.prev=s,o.length-=h}function A(o){for(var s=[],l=o.head.next;l!==o.tail;)s.push(l.value),l=l.next;return s}if(!r.document)return r.addEventListener&&(c.disableWorkerMessageHandler||r.addEventListener("message",function(o){var s=JSON.parse(o.data),l=s.language,d=s.code,h=s.immediateClose;r.postMessage(c.highlight(d,c.languages[l],l)),h&&r.close()},!1)),c;var _=c.util.currentScript();_&&(c.filename=_.src,_.hasAttribute("data-manual")&&(c.manual=!0));function F(){c.manual||c.highlightAll()}if(!c.manual){var R=document.readyState;R==="loading"||R==="interactive"&&_&&_.defer?document.addEventListener("DOMContentLoaded",F):window.requestAnimationFrame?window.requestAnimationFrame(F):window.setTimeout(F,16)}return c}(e);n.exports&&(n.exports=t),typeof Q<"u"&&(Q.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,i){var u={};u["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[i]},u.cdata=/^<!\[CDATA\[|\]\]>$/i;var c={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:u}};c["language-"+i]={pattern:/[\s\S]+/,inside:t.languages[i]};var m={};m[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:c},t.languages.insertBefore("markup","cdata",m)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(r,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading…",a=function(_,F){return"✖ Error "+_+" while fetching file: "+F},i="✖ Error: File does not exist or is empty",u={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},c="data-src-status",m="loading",b="loaded",v="failed",f="pre[data-src]:not(["+c+'="'+b+'"]):not(['+c+'="'+m+'"])';function T(_,F,R){var o=new XMLHttpRequest;o.open("GET",_,!0),o.onreadystatechange=function(){o.readyState==4&&(o.status<400&&o.responseText?F(o.responseText):o.status>=400?R(a(o.status,o.statusText)):R(i))},o.send(null)}function y(_){var F=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(_||"");if(F){var R=Number(F[1]),o=F[2],s=F[3];return o?s?[R,Number(s)]:[R,void 0]:[R,R]}}t.hooks.add("before-highlightall",function(_){_.selector+=", "+f}),t.hooks.add("before-sanity-check",function(_){var F=_.element;if(F.matches(f)){_.code="",F.setAttribute(c,m);var R=F.appendChild(document.createElement("CODE"));R.textContent=r;var o=F.getAttribute("data-src"),s=_.language;if(s==="none"){var l=(/\.(\w+)$/.exec(o)||[,"none"])[1];s=u[l]||l}t.util.setLanguage(R,s),t.util.setLanguage(F,s);var d=t.plugins.autoloader;d&&d.loadLanguages(s),T(o,function(h){F.setAttribute(c,b);var g=y(F.getAttribute("data-range"));if(g){var x=h.split(/\r\n?|\n/g),p=g[0],w=g[1]==null?x.length:g[1];p<0&&(p+=x.length),p=Math.max(0,Math.min(p-1,x.length)),w<0&&(w+=x.length),w=Math.max(0,Math.min(w,x.length)),h=x.slice(p,w).join(`
`),F.hasAttribute("data-start")||F.setAttribute("data-start",String(p+1))}R.textContent=h,t.highlightElement(R)},function(h){F.setAttribute(c,v),R.textContent=h})}}),t.plugins.fileHighlight={highlight:function(F){for(var R=(F||document).querySelectorAll(f),o=0,s;s=R[o++];)t.highlightElement(s)}};var A=!1;t.fileHighlight=function(){A||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),A=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(ne);var re=ne.exports;Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(n){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,t=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return t})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism);class _e{constructor(e){E(this,"container");E(this,"project");E(this,"root");E(this,"canvasContainer");E(this,"codePanel");this.container=e.container,this.project=e.project,this.root=document.createElement("div"),this.root.className="layout-split",this.canvasContainer=document.createElement("div"),this.canvasContainer.className="canvas-container",this.codePanel=document.createElement("div"),this.codePanel.className="code-panel",this.buildCodePanel(),this.root.appendChild(this.canvasContainer),this.root.appendChild(this.codePanel),this.container.appendChild(this.root)}getCanvasContainer(){return this.canvasContainer}dispose(){this.container.innerHTML=""}buildCodePanel(){const e=[];this.project.commonSource&&e.push({name:"common.glsl",source:this.project.commonSource});const t=["BufferA","BufferB","BufferC","BufferD"];for(const f of t){const T=this.project.passes[f];T&&e.push({name:`${f.toLowerCase()}.glsl`,source:T.glslSource})}const r=this.project.passes.Image;e.push({name:"image.glsl",source:r.glslSource});const a=document.createElement("div");a.className="tab-bar";const i=document.createElement("div");i.className="code-viewer";const u=document.createElement("button");u.className="copy-button",u.innerHTML=`
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2z" opacity="0.4"/>
        <path d="M2 5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H2zm0 1h7a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z"/>
      </svg>
    `,u.title="Copy code to clipboard";let c="";const m=u.innerHTML,b=`
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
      </svg>
    `,v=f=>{const T=e[f];c=T.source;const y=document.createElement("pre"),A=document.createElement("code");A.className="language-cpp",A.textContent=T.source,y.appendChild(A),i.innerHTML="",i.appendChild(y),re.highlightElement(A)};u.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(c),u.innerHTML=b,u.classList.add("copied"),setTimeout(()=>{u.innerHTML=m,u.classList.remove("copied")},1500)}catch(f){console.error("Failed to copy:",f)}}),e.forEach((f,T)=>{const y=document.createElement("button");y.className="tab-button",y.textContent=f.name,T===0&&y.classList.add("active"),y.addEventListener("click",()=>{a.querySelectorAll(".tab-button").forEach(A=>A.classList.remove("active")),y.classList.add("active"),v(T)}),a.appendChild(y)}),this.codePanel.appendChild(a),this.codePanel.appendChild(u),this.codePanel.appendChild(i),e.length>0&&v(0)}}class xe{constructor(e){E(this,"container");E(this,"project");E(this,"root");E(this,"canvasContainer");E(this,"contentArea");E(this,"codeViewer");E(this,"copyButton");this.container=e.container,this.project=e.project,this.root=document.createElement("div"),this.root.className="layout-tabbed";const t=document.createElement("div");t.className="tabbed-wrapper",this.contentArea=document.createElement("div"),this.contentArea.className="tabbed-content",this.canvasContainer=document.createElement("div"),this.canvasContainer.className="tabbed-canvas-container",this.codeViewer=document.createElement("div"),this.codeViewer.className="tabbed-code-viewer",this.codeViewer.style.visibility="hidden",this.copyButton=document.createElement("button"),this.copyButton.className="tabbed-copy-button",this.copyButton.innerHTML=`
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2z" opacity="0.4"/>
        <path d="M2 5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H2zm0 1h7a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z"/>
      </svg>
    `,this.copyButton.title="Copy code to clipboard",this.copyButton.style.visibility="hidden",this.contentArea.appendChild(this.canvasContainer),this.contentArea.appendChild(this.codeViewer),this.contentArea.appendChild(this.copyButton);const r=this.buildTabBar();t.appendChild(r),t.appendChild(this.contentArea),this.root.appendChild(t),this.container.appendChild(this.root)}getCanvasContainer(){return this.canvasContainer}dispose(){this.container.innerHTML=""}buildTabBar(){const e=document.createElement("div");e.className="tabbed-tab-bar";const t=[];t.push({name:"Shader",isShader:!0}),this.project.commonSource&&t.push({name:"common.glsl",isShader:!1,source:this.project.commonSource});const r=["BufferA","BufferB","BufferC","BufferD"];for(const b of r){const v=this.project.passes[b];v&&t.push({name:`${b.toLowerCase()}.glsl`,isShader:!1,source:v.glslSource})}const a=this.project.passes.Image;t.push({name:"image.glsl",isShader:!1,source:a.glslSource});let i="";const u=this.copyButton.innerHTML,c=`
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/>
      </svg>
    `;this.copyButton.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(i),this.copyButton.innerHTML=c,this.copyButton.classList.add("copied"),setTimeout(()=>{this.copyButton.innerHTML=u,this.copyButton.classList.remove("copied")},1500)}catch(b){console.error("Failed to copy:",b)}});const m=b=>{const v=t[b];if(e.querySelectorAll(".tabbed-tab-button").forEach((f,T)=>{f.classList.toggle("active",T===b)}),v.isShader)this.canvasContainer.style.visibility="visible",this.codeViewer.style.visibility="hidden",this.copyButton.style.visibility="hidden";else{this.canvasContainer.style.visibility="hidden",this.codeViewer.style.visibility="visible",this.copyButton.style.visibility="visible",i=v.source||"";const f=i.split(`
`),T=document.createElement("pre"),y=document.createElement("div");y.className="tabbed-line-numbers",y.innerHTML=f.map((F,R)=>R+1).join(`
`);const A=document.createElement("div");A.className="tabbed-code-content";const _=document.createElement("code");_.className="language-cpp",_.textContent=i,A.appendChild(_),T.appendChild(y),T.appendChild(A),this.codeViewer.innerHTML="",this.codeViewer.appendChild(T),re.highlightElement(_)}};return t.forEach((b,v)=>{const f=document.createElement("button");f.className="tabbed-tab-button",b.isShader&&f.classList.add("shader-tab"),f.textContent=b.name,v===0&&f.classList.add("active"),f.addEventListener("click",()=>m(v)),e.appendChild(f)}),e}}function we(n,e){switch(n){case"fullscreen":return new Te(e);case"centered":return new ye(e);case"split":return new _e(e);case"tabbed":return new xe(e)}}const Fe="modulepreload",Ae=function(n){return"/"+n},J={},Re=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(t.map(m=>{if(m=Ae(m),m in J)return;J[m]=!0;const b=m.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const f=document.createElement("link");if(f.rel=b?"stylesheet":Fe,b||(f.as="script"),f.crossOrigin="",f.href=m,c&&f.setAttribute("nonce",c),document.head.appendChild(f),b)return new Promise((T,y)=>{f.addEventListener("load",T),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};async function Ce(n,e,t,r){return`/demos/${n}/shadertoy.config.json`in t?Le(n,t,e,r):Se(n,e)}async function Se(n,e){const t=`/demos/${n}/image.glsl`;if(!(t in e))throw new Error(`Demo '${n}' not found. Expected ${t}`);const r=await e[t]();return{root:`/demos/${n}`,meta:{title:n.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),author:null,description:null},layout:"centered",controls:!1,commonSource:null,passes:{Image:{name:"Image",glslSource:r,channels:[{kind:"none"},{kind:"none"},{kind:"none"},{kind:"none"}]}},textures:[]}}async function Le(n,e,t,r){var R,o,s,l,d,h,g,x;const a=`/demos/${n}/shadertoy.config.json`,i=await e[a]();let u=null;if(i.common){const p=`/demos/${n}/${i.common}`;p in t&&(u=await t[p]())}else{const p=`/demos/${n}/common.glsl`;p in t&&(u=await t[p]())}const c=new Set,m=["Image","BufferA","BufferB","BufferC","BufferD"];for(const p of m){const w=i.passes[p];if(w)for(const C of["iChannel0","iChannel1","iChannel2","iChannel3"]){const S=(R=w.channels)==null?void 0:R[C];S&&"texture"in S&&c.add(S.texture)}}const b=[],v=new Map;for(const p of c){const w=`/demos/${n}/${p.replace(/^\.\//,"")}`;if(!(w in r))throw new Error(`Texture not found: ${p} (expected at ${w})`);const C=await r[w](),S=p.split("/").pop().replace(/\.[^.]+$/,"");b.push({name:S,source:C,filter:"linear",wrap:"repeat"}),v.set(p,S)}const f={};for(const p of m){const w=i.passes[p];if(!w)continue;const C={Image:"image.glsl",BufferA:"bufferA.glsl",BufferB:"bufferB.glsl",BufferC:"bufferC.glsl",BufferD:"bufferD.glsl"},S=w.source||C[p],k=`/demos/${n}/${S}`;if(!(k in t))throw new Error(`Missing shader file: ${k}`);const $=await t[k](),X=[H((o=w.channels)==null?void 0:o.iChannel0,v),H((s=w.channels)==null?void 0:s.iChannel1,v),H((l=w.channels)==null?void 0:l.iChannel2,v),H((d=w.channels)==null?void 0:d.iChannel3,v)];f[p]={name:p,glslSource:$,channels:X}}if(!f.Image)throw new Error(`Demo '${n}' must have an Image pass`);const T=((h=i.meta)==null?void 0:h.title)||n.split("-").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "),y=((g=i.meta)==null?void 0:g.author)||null,A=((x=i.meta)==null?void 0:x.description)||null,_=i.layout||"centered",F=i.controls??!1;return{root:`/demos/${n}`,meta:{title:T,author:y,description:A},layout:_,controls:F,commonSource:u,passes:f,textures:b}}function H(n,e){return n?"buffer"in n?{kind:"buffer",buffer:n.buffer,previous:!!n.previous}:"texture"in n?{kind:"texture2D",name:(e==null?void 0:e.get(n.texture))||n.texture}:"keyboard"in n?{kind:"keyboard"}:{kind:"none"}:{kind:"none"}}const ae="course/day1/red";async function Be(){return Ce(ae,Object.assign({"/demos/course/day1/red/image.glsl":()=>Re(()=>Promise.resolve().then(()=>Pe),void 0).then(r=>r.default)}),Object.assign({}),Object.assign({}))}async function ee(){try{console.log(`Loading demo: ${ae}`);const n=await Be();console.log(`Loaded project: ${n.meta.title}`),console.log("Passes:",Object.keys(n.passes).filter(i=>n.passes[i]));const e=document.getElementById("app");if(!e)throw new Error("Container element #app not found");const t=we(n.layout,{container:e,project:n}),r=t.getCanvasContainer(),a=new ve({container:r,project:n,pixelRatio:window.devicePixelRatio});a.hasErrors()?console.warn("App not started due to shader compilation errors"):(a.start(),console.log("App started!")),window.app=a,window.layout=t}catch(n){console.error("Failed to initialize:",n);const e=document.getElementById("app");e&&(e.innerHTML=`
        <div style="color: red; padding: 20px; font-family: monospace;">
          <h2>Error</h2>
          <pre>${n instanceof Error?n.message:String(n)}</pre>
        </div>
      `)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ee):ee();const Me=`void mainImage(out vec4 fragColor, in vec2 fragCoord)
{
    fragColor = vec4(1.0, 0.0, 0.0, 1.0);
}`,Pe=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"}));
